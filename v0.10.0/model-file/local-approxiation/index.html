<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Local approximation · Dynare.jl</title><meta name="title" content="Local approximation · Dynare.jl"/><meta property="og:title" content="Local approximation · Dynare.jl"/><meta property="twitter:title" content="Local approximation · Dynare.jl"/><meta name="description" content="Documentation for Dynare.jl."/><meta property="og:description" content="Documentation for Dynare.jl."/><meta property="twitter:description" content="Documentation for Dynare.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Dynare.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../installation-and-configuration/">Installation and Configuration</a></li><li><a class="tocitem" href="../../running-dynare/">Running Dynare</a></li><li><span class="tocitem">Model File</span><ul><li><a class="tocitem" href="../syntax-elements/">Syntax elements</a></li><li><a class="tocitem" href="../variable-declarations/">Variables and parameters declaration</a></li><li><a class="tocitem" href="../model-declaration/">Model declaration</a></li><li><a class="tocitem" href="../steady-state/">Steady state</a></li><li><a class="tocitem" href="../shocks/">Shocks on exgogenous variables</a></li><li><a class="tocitem" href="../deterministic-simulations/">Deterministic simulations</a></li><li class="is-active"><a class="tocitem" href>Local approximation</a></li><li><a class="tocitem" href="../filtersmoother/">State space, filtering and smoothing</a></li><li><a class="tocitem" href="../estimation/">Estimation</a></li><li><a class="tocitem" href="../forecasting/">Forecasting</a></li><li><a class="tocitem" href="../reporting/">Reporting</a></li></ul></li><li><a class="tocitem" href="../../macroprocessor/">Macroprocessing language</a></li><li><a class="tocitem" href="../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model File</a></li><li class="is-active"><a href>Local approximation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Local approximation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/DynareJulia/Dynare.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/DynareJulia/Dynare.jl/blob/main/docs/src/model-file/local-approxiation.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p>In a stochastic context, Dynare computes one or several simulations corresponding to a random draw of the shocks.</p><p>The main algorithm for solving stochastic models relies on a Taylor approximation, up to second order, of the solution function (see [<a href="../../references/#judd1996">1</a>],   [<a href="../../references/#collardhigherorder2001">2</a>], and [<a href="../../references/#schmittgrohesolving2004">3</a>]). The details of the Dynare implementation of the first order solution are given in [<a href="../../references/#villemot_solving_2011">4</a>]. Such a solution is computed using the <code>stoch_simul</code> command.</p><h3 id="Dynare-commands"><a class="docs-heading-anchor" href="#Dynare-commands">Dynare commands</a><a id="Dynare-commands-1"></a><a class="docs-heading-anchor-permalink" href="#Dynare-commands" title="Permalink"></a></h3><h4 id="stoch_simul"><a class="docs-heading-anchor" href="#stoch_simul">stoch_simul</a><a id="stoch_simul-1"></a><a class="docs-heading-anchor-permalink" href="#stoch_simul" title="Permalink"></a></h4><p><em>Command</em>: `stoch_simul;</p><p><em>Command</em>: `stoch_simul (OPTIONS...);</p><p>Solves a stochastic (i.e. rational expectations) model, using perturbation techniques.</p><p>More precisely, <code>stoch_simul</code> computes a Taylor approximation of the model around the deterministic steady state and solves of the the decision and transition functions for the approximated model. Using this, it computes impulse response functions and various descriptive statistics (moments, variance decomposition, correlation and autocorrelation coefficients). For correlated shocks, the variance decomposition is computed as in the VAR literature through a Cholesky decomposition of the covariance matrix of the exogenous variables. When the shocks are correlated, the variance decomposition depends upon the order of the variables in the <code>varexo</code> command.</p><p>The IRFs are computed as the difference between the trajectory of a variable following a shock at the beginning of period <code>1</code> and its steady state value. More details on the computation of IRFs can be found at <a href="https://archives.dynare.org/DynareWiki/IrFs">https://archives.dynare.org/DynareWiki/IrFs</a>.</p><p>Variance decomposition, correlation, autocorrelation are only displayed for variables with strictly positive variance. Impulse response functions are only plotted for variables with response larger than <span>$10^{-10}$</span>.</p><p>Variance decomposition is computed relative to the sum of the contribution of each shock. Normally, this is of course equal to aggregate variance, but if a model generates very large variances, it may happen that, due to numerical error, the two differ by a significant amount. Dynare issues a warning if the maximum relative difference between the sum of the contribution of each shock and aggregate variance is larger than <code>0.01%</code>.</p><p>The covariance matrix of the shocks is specified with the <code>shocks</code> command (see <code>shocks-exo</code>).</p><h5 id="Options"><a class="docs-heading-anchor" href="#Options">Options</a><a id="Options-1"></a><a class="docs-heading-anchor-permalink" href="#Options" title="Permalink"></a></h5><ul><li>ar = INTEGER</li></ul><p>Order of autocorrelation coefficients to compute. Default: 5</p><ul><li><code>irf = INTEGER</code></li></ul><p>Number of periods on which to compute the IRFs. Setting <code>irf=0</code> suppresses the plotting of IRFs. Default: <code>40</code>.</p><ul><li><p><code>nonstationary</code>: declares the model as nonstationary.</p></li><li><p><code>noprint</code>: don&#39;t print the results</p></li><li><p><code>order = INTEGER</code></p></li></ul><p>Order of Taylor approximation. Note that for third order and above, the <code>k_order_solver</code> option is implied and only empirical moments are available (you must provide a value for <code>periods</code> option). Default: <code>2</code></p><ul><li><code>periods = INTEGER</code></li></ul><p>If different from zero, empirical moments will be computed instead of theoretical moments. The value of the option specifies the number of periods to use in the simulations. Values of the initval block, possibly recomputed by <code>steady</code>, will be used as starting point for the simulation. The simulated endogenous variables are made available to the user in Julia variable <code>context.results.model_results[1].simulation</code>. Default: <code>0</code>.</p><ul><li><code>dr = OPTION</code></li></ul><p>Determines the method used to compute the decision rule. Possible values for OPTION are:</p><p><code>default</code></p><p>Uses the default method to compute the decision rule based on the     generalized Schur decomposition (see <em>Villemot (2011)</em> for more     information).</p><p><code>cycle_reduction</code></p><p>Uses the cycle reduction algorithm to solve the polynomial equation     for retrieving the coefficients associated to the endogenous     variables in the decision rule. This method is faster than the     default one for large scale models.</p><p>Default value is <code>default</code>.</p><h5 id="Output"><a class="docs-heading-anchor" href="#Output">Output</a><a id="Output-1"></a><a class="docs-heading-anchor-permalink" href="#Output" title="Permalink"></a></h5><p>The derivatives of the approximated solution function are availabe in the vector of matrices <code>context.results.model_results[1].solution_derivatives</code>. The first element contains the matrix of first order derivatives. The second element, the matrix of second order derivatives.</p><p>The matrix of first order derivatives is a <span>$n x (n_s + n_x + 1)$</span> matrix where <code>n</code> is the number of endogenous variables, <span>$n_s$</span>, the number of state variables (variables appearing in the model with a lag), and <span>$n_x$</span>, the number of exogenous variables. An element of this matrix is</p><p class="math-container">\[\begin{align*}
X_{i,j} &amp;= \frac{\partial g_i}{\partial y_j},\;\;j=1,\ldots,n_s\\
X_{i,n_s+j} &amp;= \frac{\partial g_i}{\partial x_j},\;\;j=1,\ldots,n_x\\
X_{i,n_s+n_k+1} &amp;= \frac{\partial g_i}{\partial \sigma} = 0
\end{align*}\]</p><p>where <span>$g_i$</span> is the solution function for variable <code>i</code>, <code>y</code>, the vector of endogenous variables, <code>x</code>, the vector en exogenous variables and <span>$\sigma$</span> the stochastic scale of the model. Note that at first order, this derivative is alwasy equal to zero. </p><p>The matrix of second order derivatives is <span>$n \times n^2$</span> matrix where each column contains derivatives with respect to a pair of endogenous variables</p><ul><li>eigenvalues::Vector{Complex{Float64}}</li><li>g1::Matrix{Float64}  # full approximation</li><li>gs1::Matrix{Float64} # state transition matrices: states x states</li><li>hs1::Matrix{Float64} # states x shocks</li><li>gns1::Matrix{Float64} # non states x states</li><li>hns1::Matrix{Float64} # non states x shocsks</li><li>g1_1::SubArray{Float64, 2, Matrix{Float64},  Tuple{Base.Slice{Base.OneTo{Int}}, UnitRange{Int}}, true}	 # solution first order derivatives w.r. to state variables</li><li>g1_2::SubArray{Float64, 2, Matrix{Float64},  Tuple{Base.Slice{Base.OneTo{Int}}, UnitRange{Int}}, true}   # solution first order derivatives w.r. to current exogenous variables</li><li>endogenous_variance::Matrix{Float64}</li><li>stationary_variables::Vector{Bool}</li></ul><h5 id="Example-1"><a class="docs-heading-anchor" href="#Example-1">Example 1</a><a id="Example-1-1"></a><a class="docs-heading-anchor-permalink" href="#Example-1" title="Permalink"></a></h5><pre><code class="nohighlight hljs">shocks;
var e;
stderr 0.0348;
end;

stoch_simul;</code></pre><p>Performs the simulation of the 1st-order approximation of a model with a single stochastic shock <code>e</code>, with a standard error of <code>0.0348</code>.</p><h6 id="Example-2"><a class="docs-heading-anchor" href="#Example-2">Example 2</a><a id="Example-2-1"></a><a class="docs-heading-anchor-permalink" href="#Example-2" title="Permalink"></a></h6><pre><code class="nohighlight hljs">    stoch_simul(irf=60);</code></pre><p>Performs the simulation of a model and displays impulse response functions on 60 periods.</p><h3 id="Julia-function"><a class="docs-heading-anchor" href="#Julia-function">Julia function</a><a id="Julia-function-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-function" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Dynare.localapproximation!" href="#Dynare.localapproximation!"><code>Dynare.localapproximation!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">localapproximation!(; context::Context=context, display = true,
                    dr_algo::String = &quot;GS&quot;, irf::Int = 40,
                    LRE_options = LinearRationalExpectationsOptions(),
                    nar::Int = 5, nonstationary::Bool = false,
                    order::Int = 1, periods::Int = 0 )</code></pre><p>computes a local approximation of a model contained in <code>context</code></p><p><strong>Keyword arguments</strong></p><ul><li><code>context::Context=context</code>: context in which the simulation is computed</li><li><code>display::Bool=true</code>: whether to display the results</li><li><code>dr_algo::String</code>: solution algorithm, either &quot;GS&quot; for generalized Schur decomposition (default)                    or &quot;CR&quot; for cyclic reduction</li><li><code>irf::Int = 40</code>: number of periods for IRFs. Use 0 for no IRF computation</li><li><code>LRE_options::LinearRationalExpectationsOptions = LinearRationalExpectationsOptions()</code>: options passed to the LinearRationalExpectation package</li><li><code>nar::Int = 5</code>: numnber of periods for autocorrelations. Use 0 for no autocorrelation computation</li><li><code>nonstationary::Bool = false</code>: to specify a nonstationary model</li><li><code>periods::Int = 0</code>: number of periods for an optional Monte Carlo simulation of the model</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/DynareJulia/Dynare.jl/blob/9acb81982a73ef45665c6534c1b8f7026601db4c/src/perturbations.jl#L408-L426">source</a></section></article><h3 id="First-order-approximation"><a class="docs-heading-anchor" href="#First-order-approximation">First-order approximation</a><a id="First-order-approximation-1"></a><a class="docs-heading-anchor-permalink" href="#First-order-approximation" title="Permalink"></a></h3><p>The approximation has the stylized form:</p><p class="math-container">\[y_t = y^s + A \phi(y_{t-1}) + B u_t\]</p><p>where <span>$y^s$</span> is the steady state value of <span>$y$</span> and <span>$\phi(y_{t-1})=y_{t-1}-y^s$</span>. Matrices of coefficients <span>$A$</span> and <span>$B$</span> are computed by Dynare.</p><h3 id="Second-order-approximation"><a class="docs-heading-anchor" href="#Second-order-approximation">Second-order approximation</a><a id="Second-order-approximation-1"></a><a class="docs-heading-anchor-permalink" href="#Second-order-approximation" title="Permalink"></a></h3><p>The approximation has the form:</p><p class="math-container">\[y_t = y^s + 0.5 \Delta^2 + A \phi(y_{t-1}) + B u_t + 0.5 C
(\phi(y_{t-1})\otimes \phi(y_{t-1})) + 0.5 D (u_t \otimes u_t) + E
(\phi(y_{t-1}) \otimes u_t)\]</p><p>where <span>$y^s$</span> is the steady state value of <span>$y$</span>, <span>$\phi(y_{t-1})=y_{t-1}-y^s$</span>, and <span>$\Delta^2$</span> is the shift effect of the variance of future shocks. Matrices of coefficients <span>$A$</span>, <span>$B$</span>, <span>$C$</span>, <span>$D$</span> and <span>$E$</span> are computed by Dynare. </p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../deterministic-simulations/">« Deterministic simulations</a><a class="docs-footer-nextpage" href="../filtersmoother/">State space, filtering and smoothing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Wednesday 25 June 2025 13:06">Wednesday 25 June 2025</span>. Using Julia version 1.10.9.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
